{"title":"文档对象模型","date":"2018-08-26T12:00:53.000Z","link":"2018/08/26/文档对象模型","comments":true,"updated":"2019-08-31T10:23:59.654Z","content":"<p>DOM—-&gt;文档对象模型</p>\n<p>它是HTML和XML的文档编程接口。</p>\n<p>HTML DOM定义了访问和操作HTML文档的标准方法。</p>\n<p>DOM以树形结构表达HTML文档。</p>\n<h4 id=\"HTML-DOM树形结构：\">HTML DOM树形结构：<a href=\"2018/08/26/文档对象模型#HTML-DOM树形结构：\"></a></h4><p><img src=\"/2018/08/26/文档对象模型/tree.png\" alt class=\"article-img\"></p>\n<h4 id=\"什么是HTML-DOM？\">什么是HTML DOM？<a href=\"2018/08/26/文档对象模型#什么是HTML-DOM？\"></a></h4><p>HTML DOM是：</p>\n<ul>\n<li>HTML 的标准对象模型</li>\n<li>HTML 的标准编程接口</li>\n<li>W3C 标准</li>\n</ul>\n<p>HTML DOM 定义了所有 HTML 元素的<em>对象</em>和<em>属性</em>，以及访问它们的<em>方法</em>。</p>\n<p><em>换言之，HTML DOM 是关于如何获取、修改、添加或删除 HTML 元素的标准。</em></p>\n<h4 id=\"HTML-DOM节点\">HTML DOM节点<a href=\"2018/08/26/文档对象模型#HTML-DOM节点\"></a></h4><p>在文档对象中有以下几个类型：</p>\n<p>Node：节点，是以下所有类型的父亲；</p>\n<p>Element：元素，对应页面上的每个标签；</p>\n<p>Text：文本，对应页面上的每一个文字；</p>\n<p>Attribute：属性，页面上所有元素的属性；</p>\n<p>Document：文档，整个页面构成的文档对象。</p>\n<h4 id=\"获取元素\">获取元素<a href=\"2018/08/26/文档对象模型#获取元素\"></a></h4><p>document.getElementById(“id的名字”)</p>\n<p>document.getElementsByClassName(“box”)</p>\n<p>document.getElementsByTagName(“div”)  获取动态集合</p>\n<p>document.querySelector(“选择器”)  会返回找到的第一个元素</p>\n<p>document.querySelectorAll(“选择器”)  获取静态集合</p>\n<p>textContent  用来获取设置元素的纯文本信息   【注意】IE8不支持，兼容性问题</p>\n<p>innerText 用来获取设置元素的纯文本信息</p>\n<p>innerHTML 用来获取和设置网页内容</p>\n<p>value 用来设置input标签的value值</p>\n<p>【类名的操作】 通过className属性设置一个dom对象有哪些样式</p>\n<p>div.className = “box magrin500“</p>\n<p>【样式的操作】通过style属性修改元素的样式</p>\n<p>凡是通过div.style来操作都是泛指行内样式</p>\n<p>div.style.width = “500px”;</p>\n<h4 id=\"如何获取非行内样式\">如何获取非行内样式<a href=\"2018/08/26/文档对象模型#如何获取非行内样式\"></a></h4><p>getComputerdStyle(dom对象，false)[“属性名”]      —–&gt;非IE获取方式</p>\n<p>dom对象.currentStyle[“样式名字”]                            ——&gt;IE获取方式</p>\n<h4 id=\"如何获取标签中自定义属性\">如何获取标签中自定义属性<a href=\"2018/08/26/文档对象模型#如何获取标签中自定义属性\"></a></h4><p>① getAttribute( );   获取标签中自定义属性，在dom对象中无</p>\n<pre><code>setAttribute( );    会将属性添加到标签体里面，在dom对象中无\n\nremoveAttribute( ); 移除标签中自定义的属性，包括本身标签属性</code></pre><p>② 直接给dom对象指定属性，该属性会被添加到dom对象中，但不会被添加到标签体里面</p>\n<h4 id=\"事件的阶段\">事件的阶段<a href=\"2018/08/26/文档对象模型#事件的阶段\"></a></h4><p>【事件的捕获阶段】 先从最外面向最里面来找事件的真正触发者</p>\n<p>【事件的目标阶段】找到事件的真正触发者</p>\n<p>如何表达事件的捕获阶段？</p>\n<p>dv.addEventListener(“click”,function( ){ },true);</p>\n<p>【事件的冒泡阶段】当子元素把事件处理完之后，会将事件冒泡给父亲处理，父亲会仍然向它的父亲冒泡</p>\n<p>如何表达事件的冒泡阶段呢？</p>\n<p>dv.addEventListener(“click”,function( ){ },false);</p>\n<p><img src=\"/2018/08/26/文档对象模型/m1.png\" alt class=\"article-img\"></p>\n<p><img src=\"/2018/08/26/文档对象模型/m2.png\" alt class=\"article-img\"></p>\n<p>阻止事件冒泡</p>\n<p>if(e&amp;&amp;e.stopPropagation){</p>\n<p>e.stopPropagation( );</p>\n<p>}else{</p>\n<p>window.event.cancelBubble:true;</p>\n<p>}</p>\n<p>如何获取事件的触发者：</p>\n<p>div.onclick = function(e){</p>\n<p>console.log(e.target);</p>\n<p>}</p>\n<h4 id=\"鼠标事件\">鼠标事件<a href=\"2018/08/26/文档对象模型#鼠标事件\"></a></h4><p>mouseenter                 mouseleave       不会触发冒泡</p>\n<p>mouseover                    mouseout          会触发事件冒泡</p>\n<p>onmousemove             鼠标移动</p>\n<h4 id=\"键盘事件\">键盘事件<a href=\"2018/08/26/文档对象模型#键盘事件\"></a></h4><p>onkeydown     先于onkeypress执行</p>\n<p>onkeypress     有一些按键不会触发（Alt、Ctrl、Shift、Esc、上下左右方向键）</p>\n<h4 id=\"节点操作\">节点操作<a href=\"2018/08/26/文档对象模型#节点操作\"></a></h4><p>Node   父亲    属性：nodeType       nodeName        nodeValue</p>\n<p>Document 文档对象</p>\n<p>Element 元素节点  属性：nodeType:1      nodeName:大写的标签名     nodeValue:null</p>\n<p>Attr    属性节点      属性：nodeType:2        nodeName:属性名                nodeValue:属性值</p>\n<p>Text  文本节点       属性：nodeType:3         nodeName:#text                  nodeValue:文本内容</p>\n<p>【Node和Element区别】</p>\n<p>Node包含Element，Node可能是Element，可能是Element，可能是Attr，可能是Text，</p>\n<p>但Element只可能是元素。</p>\n<h4 id=\"节点操作方法\">节点操作方法<a href=\"2018/08/26/文档对象模型#节点操作方法\"></a></h4><p>parentNode  ——&gt;父节点</p>\n<p>ChildNodes ——–&gt;所有的子节点</p>\n<p>childern     ———&gt;所有子元素</p>\n<p>nextSibling  ———&gt;获取下一个兄弟   【注】在IE浏览器中就是下一个元素</p>\n<p>PreviousSibling ——-&gt;获取上一个兄弟</p>\n<p>nextElementSibling  ——&gt;获取下一个和上一个兄弟元素</p>\n<p>previousElementSibling  —–&gt;获取上一个和下一个兄弟元素</p>\n<p>firstChild  ——&gt;获取第一个子节点         【注】在IE浏览器中是获取第一个子元素</p>\n<p>lastChild  ——–&gt;获取最后一个子节点</p>\n<p>firstElementChild  ——-&gt;获取第一个子元素</p>\n<p>lastElementChild  ——–&gt;获取最后一个子元素</p>\n<p>document.createElement(“input”) ——–&gt;创建一个节点</p>\n<p>appendChild( ) ——-&gt;追加节点</p>\n<p>replaceChild( ) ——-&gt;替换节点</p>\n<p>insertBefore( ) ——-&gt;插入节点</p>\n<p>removeChild( ) ——-&gt;移除子元素</p>\n<h4 id=\"【节点案例】\">【节点案例】<a href=\"2018/08/26/文档对象模型#【节点案例】\"></a></h4><p>需求：点击用户增加一个用户到列表，点击删除会将所在行用户删除</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">        姓名:&lt;input type=&quot;text&quot;&gt;</span><br><span class=\"line\">        联系方式:&lt;input type=&quot;text&quot;&gt;</span><br><span class=\"line\">        年龄:&lt;input type=&quot;text&quot;&gt;</span><br><span class=\"line\">        &lt;input type=&quot;button&quot; id=&quot;addUser&quot; value=&quot;添加用户&quot;&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">  &lt;table id=&quot;tb&quot; border=&quot;1px&quot; cellspacing=&quot;0px&quot;&gt;</span><br><span class=\"line\">      &lt;tr&gt;</span><br><span class=\"line\">      \t\t&lt;th&gt;姓名&lt;/th&gt;</span><br><span class=\"line\">      \t\t&lt;th&gt;联系方式&lt;/th&gt;</span><br><span class=\"line\">      \t\t&lt;th&gt;年龄&lt;/th&gt;</span><br><span class=\"line\">      \t\t&lt;th&gt;操作&lt;/th&gt;</span><br><span class=\"line\">   &lt;/table&gt;</span><br><span class=\"line\"> &lt;/body&gt;</span><br><span class=\"line\">   var tb = document.querySelector(&quot;#tb&quot;);</span><br><span class=\"line\">   //完成数据源的拼接</span><br><span class=\"line\">   var data =[&#123;name:&quot;kris&quot;,email:&quot;123@163.com&quot;,age:&quot;25&quot;&#125;,&#123;name:&quot;lay&quot;,email:&quot;456@qq.com&quot;,age:&quot;23&quot;&#125;];</span><br><span class=\"line\">   //完成表格的方法</span><br><span class=\"line\">   function generatorTable()&#123;</span><br><span class=\"line\">       //先清除当前表格中除了第一行之外的信息</span><br><span class=\"line\">       var trs = document.querySelectorAll(&quot;#tb tr&quot;);</span><br><span class=\"line\">       for(var i=1;i&lt;trs.length;i++)&#123;</span><br><span class=\"line\">           tb.removechild(trs[i]);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       //遍历数据源，添加表格内容</span><br><span class=\"line\">       for(var i=0;i&lt;data.length;i++)&#123;</span><br><span class=\"line\">           //数据源中有多少条数据，表格中就应该有多少行</span><br><span class=\"line\">           var tr = document.creatElement(&quot;tr&quot;);</span><br><span class=\"line\">           var obj = data[i];</span><br><span class=\"line\">           //拼接每一行有多少个单元格</span><br><span class=\"line\">           for(var key in obj)&#123;</span><br><span class=\"line\">           var td = document.createElement(&quot;td&quot;);</span><br><span class=\"line\">           td.innerText = obj[key];</span><br><span class=\"line\">           tr.appendChild(td);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       //拼接每一行的删除按钮</span><br><span class=\"line\">       var td = document.crateElement(&quot;td&quot;);</span><br><span class=\"line\">       var deleteButton = document.createElement(&quot;input&quot;);</span><br><span class=\"line\">       deleteButton.type = &quot;button&quot;;</span><br><span class=\"line\">       deteleButton.value = &quot;删除&quot;;</span><br><span class=\"line\">       deleteButton.setAttribute(&quot;idx&quot;,i);</span><br><span class=\"line\">       td.appendChild(deleteButton);</span><br><span class=\"line\">       tr.appendChild(td);</span><br><span class=\"line\">       //删除按钮点击事件</span><br><span class=\"line\">       deleteButton.onclick = function()&#123;</span><br><span class=\"line\">           var idx = this.getAttribute(&quot;idx&quot;);</span><br><span class=\"line\">           //从idx位置开始删除一个元素</span><br><span class=\"line\">           data.splice(idx,1);</span><br><span class=\"line\">           //重新生成页面</span><br><span class=\"line\">           generatorTable();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       //将每一行拼接到table中</span><br><span class=\"line\">       tb.appendChild(tr);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  generatorTable();</span><br><span class=\"line\">  //点击添加用户按钮</span><br><span class=\"line\">  var button = document.querySelector(&quot;#addUser&quot;);</span><br><span class=\"line\">  var inputs = document.querySelectorAll(&quot;input[type=&apos;text&apos;]&quot;);</span><br><span class=\"line\">  button.onclick = function()&#123;</span><br><span class=\"line\">      var name = inputs[0].value;</span><br><span class=\"line\">      var email = inputs[1].value;</span><br><span class=\"line\">      var age = inputs[2].value;</span><br><span class=\"line\">      if(!name || !email || !age)&#123;</span><br><span class=\"line\">          alert(&quot;请输入完整信息&quot;);</span><br><span class=\"line\">          //验证用户是否输入了完整的信息</span><br><span class=\"line\">      &#125;else&#123;</span><br><span class=\"line\">          //将用户输入的信息包装成对象放入到数据源中</span><br><span class=\"line\">          var obj=&#123;</span><br><span class=\"line\">              name,</span><br><span class=\"line\">              email,</span><br><span class=\"line\">              age</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          data.push(obj);</span><br><span class=\"line\">          generatorTable();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id><a href=\"2018/08/26/文档对象模型#\"></a></h4>","prev":{"title":"关于JavaScript的若干知识点","link":"2018/09/06/关于JavaScript的若干知识点"},"next":{"title":"Prototype","link":"2018/08/08/Prototype"},"plink":"http://Li_junhui.github.io.git/2018/08/26/文档对象模型/"}